# vanswap_ofx
Repair OFX files mis-generated by Vancity after their Nov 2016 system change

## The problem
Like many banks, Vancouver credit union [Vancity](https://www.vancity.com/) helps us with our bookkeeping by letting us
download account activity in the form of OFX format data files, which we can import into our accounting software. 
A transaction contains many pieces of information, particularly a _Name_ (e.g. "Telus Mobility"), a _Note_ or memo (e.g. "online payment"),
and a confirmation number (e.g. "Confirmation #46351").

In November 2016, Vancity unveiled new system software which runs their operations. One little side effect of this new software is that 
it changes how the pieces of information are stored in the slots in OFX format data files. In particular, their new software puts the Name
information in the Note field, and the Note information in the name field. This is the reverse of how it used to be. 
Those of us with accounting software see this when it looks like a transaction to "online payment", 
with a name like "Telus Mobility" as the memo.

Vancity has been told about this problem months ago, in social media posts on 
[1. Dec 2016](https://www.facebook.com/Vancity/posts/1178245885605160), 
and [21. January 2017](https://www.facebook.com/Vancity/posts/1227421884020893),
and in customer support messages. As of 25. March 2017, the OFX transaction files still have the problem. 
Hopefully Vancity will fix it eventually. 

In the meantime, we need a workaround.

## This tool
This tool is a simple piece of software to repair OFX format transation files. For each transaction with a Name and a Note, 
it puts what was in the Note field into the Name field, and vice versa. If there is a confirmation number in the Note field, 
it stays in the Note field. The rest of the file is left unchanged.

To use it, download your transaction files as usual. Then run this tool, giving it the names of one or multiple OFX transaction files. 
The tool copies each OFX file, applies the repair, and puts the repaired file alongside the original. Then, import the repaired
transaction file into your bookkeeping software.

This tool is packaged in a fairly crude, not terribly convenient way. Sorry about that. It is a command-line program which relies on 
the Python 2.7 language and a Python package called "ofxparse". It is sufficient for my personal needs. If you can use it, great. 
If you would like to use it but need a packaging of the tool that is easier to use, please leave a note here, and based on demand 
and assistance, we might collectively be able to improve things.

This tools is available for you to use, and to read and modify, for free. It is licenced as nearly public domain as I could make it.
I offer absolutely no warranty or promise of support for it. Use at your own risk.

## System requirements, and installation

Requirements: You must be comfortable running command-line programs on your computer. This tool should work on any recent 
Mac OS, Windows, or Linux computers, but has only been tested on Mac OS 10.10 and 10.11. 
You must have Python version 2.7 installed. 

Use the Python `pip` command to install the ["ofxparse" package](https://pypi.python.org/pypi/ofxparse/). 
We have tested with version 0.15, but there are newer versions. 

Download the files in this repository to your computer. You only actually need the main Python script, `src/vanswap_ofx.py`. 

Run the script from your command line with an invocation like, `./path/to/src/vanswap_ofx.py --help` . Some usage instructions 
will appear.

Based on the usage instructions, run the script again, this time passing it the paths to the OFX files you want to repair.
